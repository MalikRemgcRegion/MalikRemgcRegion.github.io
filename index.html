<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>malikremgcregion.github.io</title>
	<meta name="description" content="MalikRemgcRegion brings an insight into regional account hoppers">
	<meta property="og:type" content="website">
	<meta property="og:title" content="malikremgcregion.github.io">
	<meta property="og:description" content="Showing you regional account hoppers from malikremgcregion.github.io">
	<meta property="og:url" content="https://malikremgcregion.github.io/">
	<meta property="og:image" content="https://malikremgcregion.github.io/assets/colored_body_top2.png">
	<meta name="twitter:site" content="@malikremgcregion">
	<meta name="twitter:image" content="https://malikremgcregion.github.io/assets/colored_body_top2.png">
	<meta name="twitter:card" content="summary_large_image">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<!-- css for the world map --><style>
	body {
	  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
	}

	#chartdiv {
	  width: 100%;
	  height: 400px
	}
	</style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GMKFV61CZ9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GMKFV61CZ9');
</script>
<body>

	<!-- put into a nav file -->
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
	  <ul class="navbar-nav">
		<li class="nav-item active">
		  <a class="nav-link" href="https://malikremgcregion.github.io/">Home</a>
		</li>
		<li class="nav-item">
		  <a class="nav-link" href="https://github.com/MalikRemgcRegion/MalikRemgcRegion.github.io">Github</a>
		</li>
		<li class="nav-item">
		  <a class="nav-link" href="https://discord.gg/4X96kRjety">Discord</a>
		</li>
		<div class="dropdown">
		  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			Ladders
		  </button>
		  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			<a class="dropdown-item" href="./ladder.html">RRGC Ladder</a>
			<a class="dropdown-item" href="./shame.html">Shame Ladder</a>
			<a class="dropdown-item" href="./suspects.html">Suspects Ladder</a>
			<a class="dropdown-item" href="./restricted.html">RRGC Restricted Ladder</a>
		  </div>
		</div>
		<li class="nav-item">
		  <a class="nav-link" href="https://github.com/MalikRemgcRegion/MalikRemgcRegion.github.io/raw/main/rrgc.user.js">RRGC Userscript</a>
		</li>
		<li class="nav-item">
		  <a class="nav-link" href="./about.html">About</a>
		</li>
	  </ul>
	</nav>
	
	
	<div class="container mt-3">
		<div class="jumbotron jumbotron-fluid">
		  <div class="container">
			<h1 class="display-4">RealRemovedGamesCollectors.com</h1>
			<p class="lead">This service takes a look at the specific group of users, which have shown that they are willing to break the <a href="https://store.steampowered.com/subscriber_agreement/">SSA</a>.</p>
			<blockquote cite="https://store.steampowered.com/subscriber_agreement/">
			<h6>A. Payment Authorization</h6>
			
			You agree that you will not use IP proxying or other methods to disguise the place of your residence, whether to circumvent geographical restrictions on game content, to order or purchase at pricing not applicable to your geography, or for any other purpose. If you do this, Valve may terminate your access to your Account.
			</blockquote>
			
			<br>
			https://partner.steamgames.com/doc/store/pricing#5
			<br>
			https://partner.steamgames.com/doc/store/pricing/currencies
			<br>
		  </div>
		</div>
	</div>
	
	<div id="main_data" class="container text-light mt-3">
		<div class="row">
			<div class="col-sm-6">
			
				<h4 class="mt-3 mb-3">Top Region Hoppers</h4>
				<div class="card-deck">
				  <div class="card trh_view_profile_0">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_0"></h5>
					  <p class="card-text tophopper_0"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_0"></small>
					</div>
				  </div>
				  <div class="card trh_view_profile_1">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_1"></h5>
					  <p class="card-text tophopper_1"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_1"></small>
					</div>
				  </div>
				</div>
				
				<div class="card-deck mt-3 mb-3">
					<div class="card trh_view_profile_2">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_2"></h5>
					  <p class="card-text tophopper_2"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_2"></small>
					</div>
				  </div>
					<div class="card trh_view_profile_3">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_3"></h5>
					  <p class="card-text tophopper_3"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_3"></small>
					</div>
				  </div>
				</div>

				<div class="card-deck mt-3 mb-3">
				  <div class="card trh_view_profile_4">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_4"></h5>
					  <p class="card-text tophopper_4"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_4"></small>
					</div>
				  </div>
				  <div class="card trh_view_profile_5">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title tophopper_5"></h5>
					  <p class="card-text tophopper_5"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted tophopper_5"></small>
					</div>
				  </div>
				</div>
			</div>
				
				
			<div class="col-sm-6">
				<h4 class="mt-3 mb-3">Recent Region Changes</h4>
				<div class="card-deck">
				  <div class="card rrc_view_profile_0">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_0"></h5>
					  <p class="card-text hopper_0"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_0"></small>
					</div>
				  </div>
				  <div class="card rrc_view_profile_1">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_1"></h5>
					  <p class="card-text hopper_1"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_1"></small>
					</div>
				  </div>
				</div>
				
				<div class="card-deck mt-3 mb-3">
					<div class="card rrc_view_profile_2">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_2"></h5>
					  <p class="card-text hopper_2"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_2"></small>
					</div>
				  </div>
				  <div class="card rrc_view_profile_3">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_3"></h5>
					  <p class="card-text hopper_3"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_3"></small>
					</div>
				  </div>
				</div>
				
				<div class="card-deck mt-3 mb-3">
				  <div class="card rrc_view_profile_4">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_4"></h5>
					  <p class="card-text hopper_4"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_4"></small>
					</div>
				  </div>
				  <div class="card rrc_view_profile_5">
					<!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
					<div class="card-body">
					  <h5 class="card-title hopper_5"></h5>
					  <p class="card-text hopper_5"></p>
					</div>
					<div class="card-footer">
					  <small class="text-muted hopper_5"></small>
					</div>
				  </div>
				</div>
			</div>
			
			<!-- <div class="col-sm-3">
			
				<!-- ################################################################################################## -->
				<!-- Steam Account Changes -->
				<!-- ################################################################################################## -->
				
			<!--	<h4 class="mt-3 mb-3">Changes</h4>-->
			<!--	<div class="row" style="background-color:WhiteSmoke;">-->
			<!--	  <div class="commit_0 col mb-3"></div>-->
			<!--	</div>-->
				
			<!--	<div class="row" style="background-color:GhostWhite;">-->
			<!--	  <div class="commit_1 col"></div>-->
			<!--	</div>-->
				
				<!-- ################################################################################################## -->
				<!--  -->
				<!-- ################################################################################################## -->
				
								
		</div>
		
		
		<div class="row">
			<div class="col-sm-12">
				<div id="accounts_heatmap" class="container mt-3">
					
				</div>
			</div>
		</div>
				
		<!-- <div class="chartContainer" style="height: 300px; width: 100%;"></div> -->
	</div>
	
	<!-- Profile related stuff -->
	
	<div id="gme" class="container mt-3">
	</div>
	
	<div id="profile_data" class="container mt-3">
		<div class="row">
			<div class="col-sm-6">
				<div class="card-group">
				  <div class="card">
					<img id="steamAvatar" class="card-img-top" src="https://avatars.akamai.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg" alt="Card image cap">
					<div class="card-body">
					  <h5 id="steamAlias" class="card-title"></h5>
					  <p id="jumpCheck_text" class="card-text"></p>
					</div>
				  </div>
				  <div id="jumpCheck_card" class="card">
					<div class="card-body">
					  <h5 class="card-title"></h5>
					  <p id="behaviourBadge" class="card-text"></p>
					  <p id="profile_time_stamp" class="card-text"><small class="text-muted"></small></p>
					</div>
				  </div>
				</div>
			</div>
			<div class="col-sm-6">
				<div id="timeline_data" class="container py-2 mt-4 mb-4">
			  
				</div>
			</div>

		</div>
		<div class="row">
			<div class="col-sm-6">
				<div id="profile" class="container mt-3">
					<div class="jumbotron jumbotron-fluid">
						<canvas id="myChart" style="width:100%;">
						</canvas>  
					</div>
				</div>
			</div>
			<div class="col-sm-6">
				<div id="account_map" class="container mt-3">

				</div>
			</div>
		</div>
	</div>
	<!-- Profile related stuff -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	
	<!-- https://www.amcharts.com/demos/map-with-animated-bubbles/ -->
	<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/map.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
	<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
	
	<!-- <script src="./js/search.js"></script> -->
	<script src="./js/getUser.js"></script>
	<!--<script type="text/javascript" src="./js/RepoChanges.js"></script>-->
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	<script>
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString);
	const url_p_id = urlParams.get('id')
	if (url_p_id) {
		if(url_p_id.length == 17 && typeof parseInt(url_p_id) == "number" ){
			console.log("true");
			console.log(url_p_id);
			
			
			//lets create the user profile page.
			$("#main_data").hide();
			$("#profile_data").show();
			//add the profile shit into the id "profile"
			
			var _steamid = url_p_id;
			
			$.ajax({
			   url: "https://raw.githubusercontent.com/MalikRemgcRegion/RemGC_DB/main/db/db.json",
				type:"get",
				dataType: 'text',  
				error: function(data){
				//debugger;
				  //alert('err');
				},
				success:function(data) {
					var data = JSON.parse( data );
					
					var profile_id, profile_time_stamp, profile_region;
					
					$.each(data, function (i) {				
						if(data[i].id === _steamid ){
							
							profile_id = data[i].id;
							profile_time_stamp = data[i].time_stamp; 
							profile_region = data[i].region;
							profile_game_count = data[i].game_count;
						
						}
					});
					
					
					
					
					
					
					
					

					$.ajax({
						url: "https://api.github.com/repos/MalikRemgcRegion/MalikRemgcRegion.github.io/commits?sha=main&path=ids/"+profile_id+".json",
						type:"get",
						dataType: 'text',  
						error: function(g_data){
							//debugger;
							//alert('err');
						},
						success:function(g_data) {
							var g_data = JSON.parse( g_data );
							for (let x = 0; x < g_data.length; x++) {
								let b_Sha = g_data[x].sha;
								if(x < 1){
									
									if(g_data.length > 1) {
										b_Sha = g_data[g_data.length -1].sha; 
									}else{
										//pretty much means we have no appids to compare with? so lets not do anything.
									}
								}
								let b_Sha_2 = g_data[x+1].sha;
								$.ajax({
									url: "https://raw.githubusercontent.com/MalikRemgcRegion/MalikRemgcRegion.github.io/"+b_Sha+"/ids/"+profile_id+".json",
									type:"get",
									dataType: 'text',  
									error: function(b_data){
										//debugger;
										//alert('err');
									},
									success:function(b_data) {
										var b_data = JSON.parse( b_data );
										$.ajax({
											url: "https://raw.githubusercontent.com/MalikRemgcRegion/MalikRemgcRegion.github.io/"+b_Sha_2+"/ids/"+profile_id+".json",
											type:"get",
											dataType: 'text',  
											error: function(n_data){
												//debugger;
												//alert('err');
											},
											success:function(n_data) {
												var n_data = JSON.parse( n_data );
												var diff = [];

												jQuery.grep(n_data, function(el) {
													if (jQuery.inArray(el, b_data) == -1) diff.push(el);
												});
												
												console.log(b_Sha);
												console.log(b_Sha_2);
												console.log("diff: " + diff);
											
											}
										});
									}
								});
							}
						}
					});
					
					
					
					
					
					
					
					
					
					
					


					//add this to their profile.
					//marking profiles accordingly to their regional account changing behaviour.
					var behaviourScore = 0;					
					if(profile_region.length <= 2 && profile_region[0] == "ZZ" || profile_region.length <= 1 && profile_region[0] !== "ZZ"){
						behaviourScore = 0; 
						var behaviourData = {0: "Upstanding member of the steam community", 1:"#27dde0"};
						$("#jumpCheck_text").append(behaviourData[0]); 
						$( "#jumpCheck_card" ).addClass( "border-primary" );
						
						$( "#behaviourBadge" ).append('<img class="card-img-top" src="./assets/SteamGuard_'+behaviourScore+'.png" alt="Card image cap">');
					}			
					
					if(profile_region.length > 1 && profile_region.length <= 2 && profile_region[0] !== "ZZ"){
						behaviourScore = 1; 
						var behaviourData = {0: "Account Region has been Changed. (WARNING!)", 1:"#e07f27"};
						$("#jumpCheck_text").append(behaviourData[0]); 
						$( "#jumpCheck_card" ).addClass( "border-warning" );
						
						$( "#behaviourBadge" ).append('<img class="card-img-top" src="./assets/SteamGuard_'+behaviourScore+'.png" alt="Card image cap">');
					}
					
					if(profile_region.length > 2){
						behaviourScore = 2; 
						var behaviourData = {0: "Confirmed Changes Account Region.", 1:"#f14747"};
						$("#jumpCheck_text").append(behaviourData[0]); 
						$( "#jumpCheck_card" ).addClass( "border-danger" );
						
						$( "#behaviourBadge" ).append('<img class="card-img-top" src="./assets/SteamGuard_'+behaviourScore+'.png" alt="Card image cap">');
					}
					
					console.log(profile_id + "\n" + profile_time_stamp + "\n" + profile_region + "\n" + profile_game_count);
					
					var xValues = profile_region;
					var yValues = profile_game_count;

					new Chart("myChart", {
					  type: "line",
					  data: {
						labels: xValues,
						datasets: [{
						  fill: false,
						  lineTension: 0,
						  backgroundColor: "rgba(0,0,255,1.0)",
						  borderColor: "rgba(0,0,255,0.1)",
						  data: yValues
						}]
					  },
					  options: {
						legend: {display: false},
						scales: {
						  yAxes: [{}],
						}
					  }
					});
					
					//get commit_diff
					$.ajax({
						url: "https://api.github.com/repos/MalikRemgcRegion/MalikRemgcRegion.github.io/commits?sha=main&path=ids/"+profile_id+".json",
						type:"get",
						dataType: 'text',  
						error: function(data2){
							//debugger;
							//alert('err');
						},
						success:function(data2) {
							var data2 = JSON.parse( data2 );

							if(profile_time_stamp.length > 3){
								profile_time_stamp = profile_time_stamp.slice(-3).reverse();
								profile_region = profile_region.slice(-3).reverse();
							}
							else{
								profile_time_stamp = profile_time_stamp.reverse();
								profile_region = profile_region.reverse();
							}
							var tLine = "";
							for (let x = 0; x < profile_time_stamp.length; x++) {
								const date = new Date(profile_time_stamp[x] * 1000);
								let commit_diff = "https://github.com/MalikRemgcRegion/MalikRemgcRegion.github.io/commit/"+data2[x].sha;
								let region_flag = '<img class="card-img-top" src="./assets/cc_flags/png_100px/'+profile_region[x].toLowerCase()+'.png" alt="'+profile_time_stamp[x]+'" title="'+profile_region[x]+'" style="width:100px;height:70px;">'

								tLine += '<div class="row"><div class="col-auto text-center flex-column d-none d-sm-flex"><div class="row h-50"><div class="col border-right">&nbsp;</div><div class="col">&nbsp;</div></div><h5 class="m-2"><span class="badge badge-pill bg-light border">&nbsp;</span></h5><div class="row h-50"><div class="col">&nbsp;</div><div class="col">&nbsp;</div></div></div><div class="col py-2"><div class="card"> <div class="card-body"><div class="float-left">'+'<a class="btn btn-primary btn-block" href="'+commit_diff+'" role="button">Appid Changes<br>'+date.toLocaleDateString("da-DK")+'</a>'+'</div><div class="float-right">'+ region_flag +'</div><h4 class="card-title"></p></div></div></div></div>';
							}
							$("#timeline_data").append(tLine);
						}
					});
					
					///profile user info stuff 
					const date = new Date(profile_time_stamp[profile_time_stamp.length -1] * 1000);
					$("#profile_time_stamp").html("Last Account Region Change: " + date.toLocaleDateString("da-DK"));
					$("#steamAlias").html('<a href="https://steamcommunity.com/profiles/'+url_p_id+'">'+url_p_id+'</a>');
					

					 /**
					 * ---------------------------------------
					 * This demo was created using amCharts 5.
					 * 
					 * For more information visit:
					 * https://www.amcharts.com/
					 * 
					 * Documentation is available at:
					 * https://www.amcharts.com/docs/v5/
					 * ---------------------------------------
					 */
					 
					 jQuery.extend({
						getValues: function(url) {
							var result = null;
							$.ajax({
								url: url,
								type: 'get',
								dataType: 'text',
								async: false,
								success: function(data) {
									result = data;
								}
							});
						   return result;
						}
					});
					
					var _db = $.getValues("./db/db.json");
					var data = JSON.parse( _db );
					
					var elem = $('<div id="chartdiv"></div>');
					$('#account_map').append(elem);  
					
					var profile_id, profile_time_stamp, profile_region;

					$.each(data, function (i) {				
						if(data[i].id === url_p_id ){
							
							profile_id = data[i].id;
							profile_time_stamp = data[i].time_stamp; 
							profile_region = data[i].region;
							profile_game_count = data[i].game_count;
						
						}
					});
					
					console.log(profile_id + "\n" + profile_time_stamp + "\n" + profile_region + "\n" + profile_game_count);
					
					//this is for the id 
					let unique = [...new Set(profile_region)];
					console.log(unique); // unique is ['CN', 'AZ', 'AR', 'TR']
					
					//this is for the value, counting how many times the account has changed to a specific region.
					const counts = {};
					for (const num of profile_region) {
					  counts[num] = counts[num] ? counts[num] + 1 : 1;
					}
					console.log(counts); // count is {CN: 2, AZ: 1, AR: 2, TR: 1}
					
					//build the json data for the map.
					var data = [];
					for (let i = 0; i < unique.length; i++) {
						data.push({ id: unique[i], value: counts[unique[i]] });
					}
					console.log(JSON.stringify(data)); // data is [{"id":"CN","value":2},{"id":"AZ","value":1},{"id":"AR","value":2},{"id":"TR","value":1}]
					 
					
					var root = am5.Root.new("chartdiv");
					root.setThemes([am5themes_Animated.new(root)]);
					root._logo.dispose();

					var chart = root.container.children.push(am5map.MapChart.new(root, {}));

					var polygonSeries = chart.series.push(
					  am5map.MapPolygonSeries.new(root, {
						geoJSON: am5geodata_worldLow,
						exclude: ["AQ"]
					  })
					);

					var bubbleSeries = chart.series.push(
					  am5map.MapPointSeries.new(root, {
						valueField: "value",
						calculateAggregates: true,
						polygonIdField: "id"
					  })
					);

					var circleTemplate = am5.Template.new({});

					bubbleSeries.bullets.push(function(root, series, dataItem) {
					  var container = am5.Container.new(root, {});

					  var circle = container.children.push(
						am5.Circle.new(root, {
						  radius: 20,
						  fillOpacity: 0.7,
						  fill: am5.color(0xff0000),
						  cursorOverStyle: "pointer",
						  tooltipText: `{name}: [bold]{value}[/]`
						}, circleTemplate)
					  );

					  var countryLabel = container.children.push(
						am5.Label.new(root, {
						  text: "", //text: "{name}", leave this blank?
						  paddingLeft: 5,
						  populateText: true,
						  fontWeight: "bold",
						  fontSize: 13,
						  centerY: am5.p50
						})
					  );

					  circle.on("radius", function(radius) {
						countryLabel.set("x", radius);
					  })

					  return am5.Bullet.new(root, {
						sprite: container,
						dynamic: true
					  });
					});

					bubbleSeries.bullets.push(function(root, series, dataItem) {
					  return am5.Bullet.new(root, {
						sprite: am5.Label.new(root, {
						  text: "{value.formatNumber('#.')}",
						  fill: am5.color(0xffffff),
						  populateText: true,
						  centerX: am5.p50,
						  centerY: am5.p50,
						  textAlign: "center"
						}),
						dynamic: true
					  });
					});



					// minValue and maxValue must be set for the animations to work
					bubbleSeries.set("heatRules", [
					  {
						target: circleTemplate,
						dataField: "value",
						min: 10,
						max: 50,
						minValue: 0,
						maxValue: 100,
						key: "radius"
					  }
					]);

					bubbleSeries.data.setAll(data);

					updateData();
					setInterval(function() {
					  updateData();
					}, 2000)

					function updateData() {
					  for (var i = 0; i < bubbleSeries.dataItems.length; i++) {
						bubbleSeries.data.setIndex(i, { value: data[i].value, id: data[i].id, name: data[i].id })
					  }
					}
					
					
					
					
					
					
					
					
					
					
					
					
					
					///GetMarketEligibility
					var ReasonFlags = [0,1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768];
					var EMarketNotAllowedReason_Enums = {
						"0": "None",
						"1": "TemporaryFailure",
						"2": "AccountDisabled",
						"4": "AccountLockedDown",
						"8": "AccountLimited",
						"16": "TradeBanned",
						"32": "AccountNotTrusted",
						"64": "SteamGuardNotEnabled",
						"128": "SteamGuardOnlyRecentlyEnabled",
						"256": "RecentPasswordReset",
						"512": "NewPaymentMethod",
						"1024": "InvalidCookie",
						"2048": "UsingNewDevice",
						"4096": "RecentSelfRefund",
						"8192": "NewPaymentMethodCannotBeVerified",
						"16384": "NoRecentPurchases",
						"32768": "AcceptedWalletGift"
					};

					$.ajax({
					   url: "https://raw.githubusercontent.com/MalikRemgcRegion/MalikRemgcRegion.github.io/main/db/getmarketeligibility.json",
						type:"get",
						dataType: 'text',  
						error: function(data){
						//debugger;
						  //alert('err');
						},
						success:function(data) {
							var data = JSON.parse( data );
							
							var profile_restricted = [];
							
							var gme_reasons = "";
							
							$.each(data, function (i) {				
								if(data[i].id === url_p_id ){
									
									if(data[i].response.reason > 0 ){
										var GME = GetMarketEligibility(ReasonFlags, data[i].response.reason);
																			
										if(GME[0].includes(0)){
											gme_reasons += '<div class="alert alert-secondary" role="alert">None </div>';
										}
										if(GME[0].includes(1)){
											gme_reasons += '<div class="alert alert-secondary" role="alert">TemporaryFailure </div>';
										}
										if(GME[0].includes(4)){
											gme_reasons += '<div class="alert alert-danger" role="alert">AccountDisabled </div>';
										}
										if(GME[0].includes(8)){
											gme_reasons += '<div class="alert alert-danger" role="alert">AccountLockedDown </div>';
										}
										if(GME[0].includes(16)){
											gme_reasons += '<div class="alert alert-warning" role="alert">AccountLimited </div>';
										}
										if(GME[0].includes(32)){
											gme_reasons += '<div class="alert alert-danger" role="alert">TradeBanned </div>';
										}
										if(GME[0].includes(64)){
											gme_reasons += '<div class="alert alert-warning" role="alert">AccountNotTrusted </div>';
										}
										if(GME[0].includes(128)){
											gme_reasons += '<div class="alert alert-warning" role="alert">SteamGuardNotEnabled </div>';
										}
										if(GME[0].includes(256)){
											gme_reasons += '<div class="alert alert-warning" role="alert">SteamGuardOnlyRecentlyEnabled </div>';
										}
										if(GME[0].includes(512)){
											gme_reasons += '<div class="alert alert-secondary" role="alert">RecentPasswordReset </div>';
										}
										if(GME[0].includes(1024)){
											gme_reasons += '<div class="alert alert-warning" role="alert">NewPaymentMethod </div>';
										}
										if(GME[0].includes(2048)){
											gme_reasons += '<div class="alert alert-secondary" role="alert">InvalidCookie </div>';
										}
										if(GME[0].includes(4096)){
											gme_reasons += '<div class="alert alert-warning" role="alert">UsingNewDevice </div>';
										}
										if(GME[0].includes(8192)){
											gme_reasons += '<div class="alert alert-warning" role="alert">RecentSelfRefund </div>';
										}
										if(GME[0].includes(16384)){
											gme_reasons += '<div class="alert alert-warning" role="alert">NewPaymentMethodCannotBeVerified </div>';
										}
										if(GME[0].includes(32768)){
											gme_reasons += '<div class="alert alert-primary" role="alert">AcceptedWalletGift </div>';
										}
										
									}
								}
							});
							

							//console.log(profile_restricted);
							

							$('#gme').append(gme_reasons);
							
							

						}
					});
					
					
					
					
					
					
					function GetMarketEligibility(reasonsFlags, reasonSum) {
						reasonsFlags = reasonsFlags.filter(function (value) {
							return value <= reasonSum;
						});

						reasonsFlags.sort(function (a, b) {
							return b - a;
						});

						var result = [];

						while (reasonsFlags.length > 0) {
							var i;
							var sum = 0;
							var addedIndices = [];

							for (i = 0; i < reasonsFlags.length; i++) {
								if (sum + reasonsFlags[i] <= reasonSum) {
									sum += reasonsFlags[i];
									addedIndices.push(i);
								}
							}

							var subset = [];
							for (i = addedIndices.length - 1; i >= 0; i--) {
								subset.unshift(reasonsFlags[addedIndices[i]]);
								reasonsFlags.splice(addedIndices[i], 1);
							}
							result.push(subset);
						}
						return result;
					}
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					




				}
			});
			
		}else{
			console.log("false");
			console.log(url_p_id);
		}
	}else{
		$("#profile_data").hide();
		jQuery.extend({
			getValues: function(url) {
				var result = null;
				$.ajax({
					url: url,
					type: 'get',
					dataType: 'text',
					async: false,
					success: function(data) {
						result = data;
					}
				});
			   return result;
			}
		});
		
		var _db = $.getValues("./db/db.json");
		var data = JSON.parse( _db );
		
		var elem = $('<div id="chartdiv"></div>');
		$('#accounts_heatmap').append(elem);  
		
		var profile_region = [];
		$.each(data, function (i) {				
			profile_region.push(data[i].region[data[i].region.length -1]);				
		});
		const counts = {};
		for (const num of profile_region) {
		  counts[num] = counts[num] ? counts[num] + 1 : 1;
		}
		console.log(counts);
		//build the json data for the map.
		var data = [];
		Object.entries(counts).forEach(entry => {
		  const [keys, values] = entry;
		  if(keys === "ZZ"){
		  }else{
			data.push({ id: keys, value: values });
			}
		});
		
		var root = am5.Root.new("chartdiv");
		root.setThemes([am5themes_Animated.new(root)]);
		root._logo.dispose();

		var chart = root.container.children.push(am5map.MapChart.new(root, {}));

		var polygonSeries = chart.series.push(
		  am5map.MapPolygonSeries.new(root, {
			geoJSON: am5geodata_worldLow,
			exclude: ["AQ"]
		  })
		);

		var bubbleSeries = chart.series.push(
		  am5map.MapPointSeries.new(root, {
			valueField: "value",
			calculateAggregates: true,
			polygonIdField: "id"
		  })
		);

		var circleTemplate = am5.Template.new({});

		bubbleSeries.bullets.push(function(root, series, dataItem) {
		  var container = am5.Container.new(root, {});

		  var circle = container.children.push(
			am5.Circle.new(root, {
			  radius: 20,
			  fillOpacity: 0.7,
			  fill: am5.color(0xff0000),
			  cursorOverStyle: "pointer",
			  tooltipText: `{name}: [bold]{value}[/]`
			}, circleTemplate)
		  );

		  var countryLabel = container.children.push(
			am5.Label.new(root, {
			  text: "", //text: "{name}", leave this blank?
			  paddingLeft: 5,
			  populateText: true,
			  fontWeight: "bold",
			  fontSize: 13,
			  centerY: am5.p50
			})
		  );

		  circle.on("radius", function(radius) {
			countryLabel.set("x", radius);
		  })

		  return am5.Bullet.new(root, {
			sprite: container,
			dynamic: true
		  });
		});

		bubbleSeries.bullets.push(function(root, series, dataItem) {
		  return am5.Bullet.new(root, {
			sprite: am5.Label.new(root, {
			  text: "{value.formatNumber('#.')}",
			  fill: am5.color(0xffffff),
			  populateText: true,
			  centerX: am5.p50,
			  centerY: am5.p50,
			  textAlign: "center"
			}),
			dynamic: true
		  });
		});



		// minValue and maxValue must be set for the animations to work
		bubbleSeries.set("heatRules", [
		  {
			target: circleTemplate,
			dataField: "value",
			min: 10,
			max: 50,
			minValue: 0,
			maxValue: 100,
			key: "radius"
		  }
		]);

		bubbleSeries.data.setAll(data);

		updateData();
		setInterval(function() {
		  updateData();
		}, 2000)

		function updateData() {
		  for (var i = 0; i < bubbleSeries.dataItems.length; i++) {
			bubbleSeries.data.setIndex(i, { value: data[i].value, id: data[i].id, name: data[i].id })
		  }
		}
	}
	</script>
	<script>$('body').css('background-image', 'url("./assets/colored_body_top2.png")');</script>
	<!-- jQuery Datatable js --><script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
	<!-- Bootstrap Datatable js --><script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
</body>
</html>